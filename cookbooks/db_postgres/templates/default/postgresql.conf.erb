# Local modifications will be overwritten.
#
# The PostgreSQL database server configuration file.
#
# One can use all long options that the program supports.
# Run program with --help to get a list of available options and with
# --print-defaults to see which it would actually understand and use.
#
# For explanations see
# http://www.postgresql.org/docs/9.1/interactive/runtime-config.html

data_directory = '<%= @node[:db_postgres][:datadir] %>'
hba_file = '<%= @node[:db_postgres][:confdir] %>/pg_hba.conf'
ident_file = '<%= @node[:db_postgres][:ident_file] %>'
external_pid_file = '<%= @node[:db_postgres][:pid_file] %>'
listen_addresses = '*'
max_connections = <%= @node[:db_postgres][:tunable][:max_connections] %>
unix_socket_directory = '<%= @node[:db_postgres][:socket] %>'
shared_buffers = <%= @node[:db_postgres][:tunable][:shared_buffers] %>                   # min 128kB
wal_level = hot_standby 
archive_mode = on  
archive_command = '/bin/true'
max_wal_senders = 5
wal_keep_segments = 32
hot_standby = on 
log_destination = 'stderr' 
logging_collector = on 
log_directory = 'pg_log'
log_filename = 'postgresql-%a.log'
log_truncate_on_rotation = on 
log_rotation_age = 1d 
log_rotation_size = 0 
log_checkpoints = on
log_line_prefix = '%m '
datestyle = 'iso, mdy'
lc_messages = 'C'
lc_monetary = 'C'
lc_numeric = 'C'
lc_time = 'C'
default_text_search_config = 'pg_catalog.english'

synchronous_standby_names = '*'
synchronous_commit = on

# End of postgresql.conf file
